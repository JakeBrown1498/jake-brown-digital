---
import { sanity } from "../lib/sanity.js";
import Nav from "../components/Nav.astro";

const homepage = await sanity.fetch(`
  *[_type == "homepage"][0] {
    heroImage,
    heroHeading,
    heroIntro,
    services,
    featuredWeeknotes[]->{
      title,
      publishedAt,
      slug,
      intro
    },
    contactHeading,
    contactIntro,
    contactPoints,
    socialLinks
  }
`);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jake Brown - Digital Experience Leader</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
        line-height: 1.6;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      /* Hero */
      .hero {
        padding: 4rem 0;
      }

      .hero-image {
        width: 100%;
        max-width: 600px;
        height: 300px;
        background: #e5e5e5;
        margin-bottom: 2rem;
      }

      .hero h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        line-height: 1.2;
      }

      .hero p {
        font-size: 1.1rem;
        color: #333;
      }

      /* Services */
      .services {
        padding: 4rem 0;
      }

      .service {
        margin-bottom: 3rem;
      }

      .service h2 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .service p {
        color: #666;
      }

      /* Weeknotes */
      .weeknotes-section {
        padding: 4rem 0;
        background: #f9f9f9;
      }

      .weeknotes-section h2 {
        font-size: 2rem;
        margin-bottom: 2rem;
      }

      .weeknote-card {
        background: white;
        padding: 2rem;
        margin-bottom: 1.5rem;
        border-radius: 8px;
      }

      .weeknote-card h3 {
        margin-bottom: 0.5rem;
      }

      .weeknote-card time {
        color: #999;
        font-size: 0.9rem;
      }

      .weeknote-card p {
        margin-top: 1rem;
        color: #666;
      }

      /* Contact */
      .contact {
        padding: 4rem 0;
      }

      .contact h2 {
        font-size: 2rem;
        margin-bottom: 1rem;
      }

      .contact ul {
        margin: 1.5rem 0;
        padding-left: 1.5rem;
      }

      .contact li {
        margin-bottom: 0.5rem;
      }

      form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: 2rem;
      }

      input,
      textarea {
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-family: inherit;
      }

      textarea {
        min-height: 150px;
        resize: vertical;
      }

      button {
        background: #000;
        color: white;
        padding: 1rem 2rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
      }

      button:hover {
        background: #333;
      }

      /* Footer */
      footer {
        background: #2d2d2d;
        color: white;
        padding: 3rem 0;
        text-align: center;
      }

      .social-links {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .social-links a {
        width: 40px;
        height: 40px;
        background: white;
        color: #2d2d2d;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        text-decoration: none;
      }

      .footer-nav {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .footer-nav a {
        color: white;
        text-decoration: none;
      }

      .footer-nav a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <Nav />

    <main>
      <!-- Hero -->
      <section class="hero container">
        <div class="hero-image"></div>
        <h1>{homepage.heroHeading}</h1>
        <p>{homepage.heroIntro}</p>
      </section>

      <!-- Services -->
      <section class="services container">
        {
          homepage.services?.map((service) => (
            <div class="service">
              <h2>{service.title}</h2>
              <p>{service.description}</p>
            </div>
          ))
        }
      </section>

      <!-- Weeknotes -->
      <section class="weeknotes-section">
        <div class="container">
          <h2>Weeknotes</h2>
          {
            homepage.featuredWeeknotes?.map((weeknote) => (
              <a
                href={`/weeknotes/${weeknote.slug.current}`}
                class="weeknote-card"
              >
                <h3>{weeknote.title}</h3>
                <time>
                  {new Date(weeknote.publishedAt).toLocaleDateString()}
                </time>
                {weeknote.intro && (
                  <p>{weeknote.intro[0]?.children[0]?.text}</p>
                )}
              </a>
            ))
          }
        </div>
      </section>

      <!-- Contact -->
      <section class="contact container">
        <h2>{homepage.contactHeading}</h2>
        <p>{homepage.contactIntro}</p>

        {
          homepage.contactPoints && (
            <ul>
              {homepage.contactPoints.map((point) => (
                <li>{point}</li>
              ))}
            </ul>
          )
        }

        <form>
          <input type="text" placeholder="Your name (required)" required />
          <input type="email" placeholder="Your email (required)" required />
          <textarea placeholder="Message (required)" required></textarea>
          <button type="submit">Send Message</button>
        </form>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="social-links">
          {
            homepage.socialLinks?.linkedin && (
              <a
                href={homepage.socialLinks.linkedin}
                target="_blank"
                aria-label="LinkedIn"
              >
                in
              </a>
            )
          }
          {
            homepage.socialLinks?.instagram && (
              <a
                href={homepage.socialLinks.instagram}
                target="_blank"
                aria-label="Instagram"
              >
                IG
              </a>
            )
          }
        </div>

        <nav class="footer-nav">
          <a href="/weeknotes">Weeknotes</a>
          <a href="/work">My Work</a>
          <a href="/about">About</a>
          <a href="#contact">Contact</a>
        </nav>
      </div>
    </footer>
  </body>
</html>
